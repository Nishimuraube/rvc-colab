## RVC (Retrieval-based Voice Conversion / 検索ベース音声変換) Colab プロジェクト

本プロジェクトは、RVC (Retrieval-based Voice Conversion / 検索ベース音声変換) 技術を体験できる **Google Colab ノートブック** を提供します。
これにより、ローカルで高性能な GPU 環境を用意しなくても、簡単に自分の音声モデルを学習させたり、音声変換を実行できます。

**この Colab ノートブックは Google Colab Python 3.11 環境に完全対応しており、元の RVC プロジェクトに存在していた既知の不具合を修正して、より安定した快適な体験を提供します。**

**元プロジェクト:** [RVC-Project/Retrieval-based-Voice-Conversion-WebUI](https://github.com/RVC-Project/Retrieval-based-Voice-Conversion-WebUI)
**Colab ノートブック:**
[![Colab](https://img.shields.io/badge/Colab-F9AB00?style=for-the-badge\&logo=googlecolab\&color=525252)](https://colab.research.google.com/github/Nishimuraube/rvc-colab/blob/main/rvc-colab_jp.ipynb)

---

## 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [主な機能](#主な機能)
3. [動作環境](#動作環境)
4. [使い方](#使い方)

   * [Colab ノートブックを開く](#colab-ノートブックを開く)
   * [環境構築](#環境構築)
   * [データセット準備](#データセット準備)
   * [モデル学習](#モデル学習)
   * [推論（音声変換）](#推論音声変換)
   * [結果のダウンロード](#結果のダウンロード)
5. [重要な注意点](#重要な注意点)
6. [トラブルシューティング](#トラブルシューティング)
7. [謝辞](#謝辞)
8. [ライセンス](#ライセンス)

---

## プロジェクト概要

検索ベース音声変換 (RVC) は、入力音声の内容やリズムを保ちながら、別の対象音声に変換する深層学習技術です。
この Colab ノートブックは、環境構築や依存関係の解決を自動化し、構造化された作業フローを提供することで、音声変換をより簡単に体験できるようにしています。

特に、Google Colab 最新の Python 3.11 に対応済みで、元プロジェクトの一部バグを修正し、互換性と安定性を改善しています。

---

## 主な機能

* **簡単操作:** Google Colab 上で直接実行可能、ローカルでの複雑なセットアップ不要。
* **Python 3.11 完全対応**（2025年9月5日対応版）。
* **不具合修正:** 元プロジェクトのバグを解決し、安定性を向上。
* **RVC モデル学習:** 自分の音声データを使ってオリジナルの音声モデルを作成。
* **音声変換 (推論):** 学習済みモデルや公開済みモデルを使って音声変換を実行。
* **データ管理:** データセットの準備・アップロードをサポート。
* **Google Drive 連携:** Drive からモデルやデータを保存・読み込み可能。

---

## 動作環境

* **Google アカウント**（Colab と Drive 利用のため）
* **音声データセット:**

  * 新規モデル学習には、対象話者のクリアな音声（最低 10～30分程度）が必要。
  * 推奨フォーマットは `.wav`。
* **Colab の基本操作スキル**（セル実行、ファイル管理など）。

---

## 使い方

### Colab ノートブックを開く

1. 上記リンクから Colab ノートブックを開く。
2. `ファイル > ドライブにコピーを保存` で自分の Google Drive に保存することを推奨。

### 環境構築

* GPU ランタイムを有効化 (`ランタイム > ランタイムのタイプを変更 > GPU`)。
* RVC リポジトリのクローン、依存パッケージのインストール（Python 3.11 最適化済み）。
* セルを順番に実行（`Shift + Enter` で実行）。

### データセット準備

* `.wav` ファイルを含むフォルダを zip に圧縮し、Colab または Google Drive にアップロード。
* ノートブックで zip パスを指定。
* 必要に応じて音声の切り出しや特徴抽出を実行。

### モデル学習

1. **学習設定:**

   * プロジェクト名、データセットのパスを指定。
   * `epoch`（学習回数）、`batch_size`、`sample_rate`、`f0method`（`pm`, `harvest`, `crepe`, `rmvpe` など）を設定。
   * 事前学習モデルからの微調整も可能。
2. **学習開始:** 学習セルを実行。時間はデータ量やエポック数に依存。
3. **進行確認:** ログや損失値を確認。モデル (`.pth`) とインデックス (`.index`) は Drive に保存可能。

### 推論（音声変換）

1. **モデル読み込み:** 学習済み `.pth` と `.index` を指定。
2. **入力音声:** 変換したい音声ファイルをアップロード。
3. **変換設定:** `transpose`（ピッチ変換）、`index_rate`（特徴検索率）、f0 抽出方式を調整可能。
4. **推論実行:** 出力は変換後の音声ファイル。

### 結果のダウンロード

* 変換音声は Colab から直接ダウンロード、または Google Drive に保存可能。
* 学習済みモデル (`.pth`, `.index`) も必ず保存推奨。

---

## 重要な注意点

* **Colab GPU 制限:** 無料枠には時間制限あり。学習が中断される可能性も。Pro/Pro+ なら安定稼働可。
* **データ保存:** Colab 上のファイルは一時的。Drive へ保存必須。
* **データ品質:** 音質が良く、ノイズが少ないデータほど変換精度が高い。
* **パラメータ調整:** 高品質化には f0 抽出方法や `epoch` 調整が重要。
* **倫理面:** 他人の声を無断で利用したクローンは厳禁。必ず本人の同意を得ること。

---

## トラブルシューティング

* **「GPU が使えない」や「切断される」場合:**

  * GPU ランタイムを有効化。
  * Colab 利用制限に達している可能性あり。時間を置くか Pro へ。
* **依存関係エラー:**

  * Python 3.11 ランタイムであることを確認。
  * ランタイムを再起動後、再実行。
* **出力音声が悪い:**

  * データセットを改善（量・品質）。
  * f0 抽出方法を変更（`rmvpe` 推奨）。
  * 学習 `epoch` を増加。
  * 推論時の `index_rate` を調整。
* **ファイルが見つからない:**

  * パス指定を再確認。Drive や Colab 上で存在を確認。

---

## 謝辞

* 本 Colab ノートブックは `RVC-Project/Retrieval-based-Voice-Conversion-WebUI` をベースにしています。
* RVC コミュニティの開発者・研究者の皆様に感謝いたします。

---

## ライセンス

ライセンスについては、元プロジェクト `RVC-Project/Retrieval-based-Voice-Conversion-WebUI` のリポジトリを参照してください。

---